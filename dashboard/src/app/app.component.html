<div class="page">
  <!-- Navbar -->
  <div class="mb-3">
    <header class="navbar navbar-expand-md navbar-dark d-print-none">
      <div class="container-xl">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false"
          aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <h1 class="navbar-brand navbar-brand-autodark d-none-navbar-horizontal pe-0 pe-md-3">
          <a href="/">
            <img src="assets/logo.png" width="110" height="32" alt="nano casa" class="navbar-brand-image">
          </a>
        </h1>
        <div class="navbar-nav flex-row order-md-last">
          <div class="d-none d-md-flex">
            <a href="https://github.com/obsidiaHQ/nano-casa" target="_blank" class="nav-link" title="Source code">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24"
                stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path
                  d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5">
                </path>
              </svg>
            </a>
            <a href="https://twitter.com/geommr" target="_blank" class="nav-link" title="Twitter">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24"
                stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path
                  d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z">
                </path>
              </svg>
            </a>
            <a href="?theme=dark" class="nav-link hide-theme-dark" title="Enable dark mode" data-bs-toggle="tooltip" data-bs-placement="bottom">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
              </svg>
            </a>
            <a href="?theme=light" class="nav-link hide-theme-light" title="Enable light mode" data-bs-toggle="tooltip" data-bs-placement="bottom">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <circle cx="12" cy="12" r="4" />
                <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7" />
              </svg>
            </a>
          </div>
        </div>
        <div class="collapse navbar-collapse" id="navbar-menu">
          <div class="d-flex flex-column flex-md-row flex-fill align-items-stretch align-items-md-center">
            <ul class="navbar-nav">
              <li class="nav-item active">
                <a class="nav-link" href="./#">
                  <span class="nav-link-title">
                    Home
                  </span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" routerLink="/about">
                  <span class="nav-link-title">
                    About
                  </span>
                </a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#navbar-third" data-bs-toggle="dropdown" data-bs-auto-close="outside" role="button"
                  aria-expanded="false">
                  <span class="nav-link-title">
                    Resources
                  </span>
                </a>
                <div class="dropdown-menu">
                  <a class="dropdown-item" href="https://nano.casa/explorer">
                    Node Explorer
                  </a>
                  <a class="dropdown-item" href="https://github.com/obsidiaHQ/nano-casa/issues/1" target="_blank">
                    Add a Project
                  </a>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </header>
  </div>
  <div class="page-wrapper">
    <!-- Page body -->
    <div class="page-body">
      <div class="container-xl">
        <div class="row row-cards">

          <div class="col-12 col-md-3">
            <div class="card">
              <ng-container *ngIf="!repos.length">
                <div class="card-body d-flex justify-content-center">
                  <div class="spinner-grow text-secondary align-self-center" role="status">
                    <span class="visually-hidden">Loading...</span>
                  </div>
                </div>
              </ng-container>
              <div *ngIf="repos.length" class="card-body">
                <div class="row align-items-center">
                  <div class="col-auto">
                    <span class="bg-teal-lt text-white avatar">
                      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-git-merge" width="24" height="24" viewBox="0 0 24 24"
                        stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <circle cx="7" cy="18" r="2"></circle>
                        <circle cx="7" cy="6" r="2"></circle>
                        <circle cx="17" cy="12" r="2"></circle>
                        <line x1="7" y1="8" x2="7" y2="16"></line>
                        <path d="M7 8a4 4 0 0 0 4 4h4"></path>
                      </svg>
                    </span>
                  </div>
                  <div class="col">
                    <div class="font-weight-medium">
                      {{repos.length}}
                    </div>
                    <div class="text-muted">
                      Projects
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-3">
            <div class="card">
              <ng-container *ngIf="!recentRepos.length">
                <div class="card-body d-flex justify-content-center">
                  <div class="spinner-grow text-secondary align-self-center" role="status">
                    <span class="visually-hidden">Loading...</span>
                  </div>
                </div>
              </ng-container>
              <div *ngIf="recentRepos.length" class="card-body">
                <div class="row align-items-center">
                  <div class="col-auto">
                    <span class="bg-pink-lt text-white avatar">
                      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-history" width="24" height="24" viewBox="0 0 24 24"
                        stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <polyline points="12 8 12 12 14 14"></polyline>
                        <path d="M3.05 11a9 9 0 1 1 .5 4m-.5 5v-5h5"></path>
                      </svg>
                    </span>
                  </div>
                  <div class="col">
                    <div class="font-weight-medium">
                      <a target="_blank" href="https://github.com/{{recentRepos[0]?.full_name}}">
                        {{recentRepos[0]?.name}}
                      </a>
                    </div>
                    <div class="text-muted">
                      Latest Project
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-3">
            <div class="card">
              <ng-container *ngIf="!contributors.length">
                <div class="card-body d-flex justify-content-center">
                  <div class="spinner-grow text-secondary align-self-center" role="status">
                    <span class="visually-hidden">Loading...</span>
                  </div>
                </div>
              </ng-container>
              <div *ngIf="contributors.length" class="card-body">
                <div class="row align-items-center">
                  <div class="col-auto">
                    <span class="bg-azure-lt text-white avatar">
                      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-users" width="24" height="24" viewBox="0 0 24 24"
                        stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        <path d="M21 21v-2a4 4 0 0 0 -3 -3.85"></path>
                      </svg>
                    </span>
                  </div>
                  <div class="col">
                    <div class="font-weight-medium">
                      {{contributors.length}}
                    </div>
                    <div class="text-muted">
                      Contributors
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-3">
            <div class="card">
              <ng-container *ngIf="!milestones.length">
                <div class="card-body d-flex justify-content-center">
                  <div class="spinner-grow text-secondary align-self-center" role="status">
                    <span class="visually-hidden">Loading...</span>
                  </div>
                </div>
              </ng-container>
              <div *ngIf="milestones.length" class="card-body">
                <div class="row align-items-center">
                  <div class="col">
                    <div class="row g-2 align-items-center">
                      <div class="col-auto">
                        {{milestones[0].closed_issues/(milestones[0].open_issues + milestones[0].closed_issues) | percent}}
                      </div>
                      <div class="col">
                        <div class="progress progress-sm">
                          <div class="progress-bar bg-purple" role="progressbar"
                            [ngStyle]="{width: milestones[0].closed_issues*100/(milestones[0].open_issues + milestones[0].closed_issues)+'%' }"
                            [attr.aria-valuenow]="milestones[0].closed_issues" [attr.aria-valuemin]="0"
                            [attr.aria-valuemax]="milestones[0].open_issues + milestones[0].closed_issues">
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="text-muted">
                      {{milestones[0].title}} ({{milestones[0].closed_issues}}/{{milestones[0].closed_issues+milestones[0].open_issues}})
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>

        <div class="row">
          <div class="col-12 col-md-8 mt-3">
            <div class="card">
              <ng-container *ngIf="!commits[0].series.length">
                <div class="spinner-grow text-secondary align-self-center" role="status">
                  <span class="visually-hidden">Loading...</span>
                </div>
              </ng-container>
              <ng-container *ngIf="commits[0].series.length">

                <div class="card-body">
                  <div class="card-title">
                    <h3>Weekly activity</h3>
                  </div>
                  <div style="flex:auto; min-width: 0;">
                    <div class="chart" style="width: 100%; height: 417px">
                      <ngx-charts-area-chart [xAxis]="true" [yAxis]="true" [results]="commits" scheme="horizon" [schemeType]="ScaleType.Ordinal">
                      </ngx-charts-area-chart>
                    </div>
                  </div>
                </div>
              </ng-container>
            </div>
          </div>
          <div class="col-12 col-md-4 mt-3">
            <div class="card" style="height: 489px;">
              <div class="card-table table-responsive">
                <table class="table table-vcenter">
                  <thead>
                    <tr>
                      <th>User</th>
                      <th>Commit</th>
                      <th class="text-center"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock-hour-8" width="24" height="24"
                          viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                          <circle cx="12" cy="12" r="9"></circle>
                          <path d="M12 12l-3 2"></path>
                          <path d="M12 7v5"></path>
                        </svg></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let commit of contributors|slice:0:11">
                      <td class="w-1 py-1">
                        <img class="avatar avatar-sm" src="{{commit.avatar_url}}" [alt]="commit.login" [title]="commit.login">
                      </td>
                      <td class="td-truncate py-1">
                        <div class="text-truncate opacity-80">
                          Fix dart Sass compatibility (#29755)
                        </div>
                      </td>
                      <td class="text-nowrap text-muted py-1">28 Nov 2019</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 mt-3">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Projects</h3>
              <div class="ms-4 lh-1">
                <div class="dropdown">
                  <a class="dropdown-toggle text-muted" href="#" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Most popular</a>
                  <div class="dropdown-menu dropdown-menu-end">
                    <a class="dropdown-item active" href="#">Most popular</a>
                    <a class="dropdown-item" href="#">Most recent</a>
                  </div>
                </div>
              </div>
              <div class="ms-auto d-inline-block">
                <input type="text" class="form-control form-control-sm" aria-label="Search invoice" placeholder="Search">
              </div>
            </div>
            <div class="table-responsive">
              <table class="table table-vcenter table-mobile-md card-table">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Description</th>
                    <th class="w-1"></th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let repo of popularReposPage">
                    <td data-label="Name" class="py-2">
                      <div class="d-flex py-1 align-items-center">
                        <div class="flex-fill">
                          <div class="font-weight-medium">
                            <a href="https://github.com/{{repo.full_name}}" target="_blank">
                              <span>{{repo.name}}</span>
                              <span class="badge bg-yellow-lt ms-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-star" width="24" height="24" viewBox="0 0 24 24"
                                  stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                  <path d="M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"></path>
                                </svg>
                                {{repo.stargazers_count}}
                              </span>
                            </a>
                          </div>
                        </div>
                      </div>
                    </td>
                    <td data-label="Description">
                      <span class="opacity-75">{{repo.description}}</span>
                    </td>
                    <td>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <app-pagination [pageSize]="16" [items]="popularRepos" (changePage)="popularReposPage = $event.items"></app-pagination>
          </div>
        </div>

      </div>
    </div>

    <footer class="footer footer-transparent d-print-none">
      <div class="container-xl">
        <div class="row text-center align-items-center flex-row-reverse">
          <div class="col-lg-auto ms-lg-auto">
            <ul class="list-inline list-inline-dots mb-0">
              <li class="list-inline-item text-secondary">Last updated <span *ngIf="milestones.length">{{milestones[0].created_at | timeago:false}}</span></li>
              <li class="list-inline-item"><a routerLink="/about" class="link-secondary">About</a></li>
              <li class="list-inline-item"><a href="https://github.com/obsidiaHQ/nano-casa/blob/main/LICENSE" target="_blank" class="link-secondary">License</a>
              </li>
              <li class="list-inline-item"><a href="https://github.com/obsidiaHQ/nano-casa" target="_blank" class="link-secondary" rel="noopener">Source
                  code</a></li>
              <li class="list-inline-item">
                <a href="https://twitter.com/geommr" target="_blank" class="link-secondary" rel="noopener">
                  Twitter
                </a>
              </li>
            </ul>
          </div>
          <div class="col-12 col-lg-auto mt-3 mt-lg-0">
            <ul class="list-inline list-inline-dots mb-0">
              <li class="list-inline-item">
                Obsidia
              </li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
  </div>
</div>